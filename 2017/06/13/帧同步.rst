帧同步
******

.. author:: default
.. categories:: none
.. tags:: 游戏开发, network
.. comments::

什么是帧同步？
============
同步什么？
------------

为什么使用帧同步？
===================


帧同步的基本流程
==============

使用什么网络协议
==============

开始战斗，中途加入与退出、切换英雄
=================================
在此，帧同步仅针对Combat对象，即帧数据由Combat对象来处理。

如果允许中途加入，进入战斗的命令需要特殊处理，因为角色进入战斗的初始命令肯定是普通(非帧)命令，所以需要
将进入战斗的普通命令转换为帧命令，告知其它客户端新角色进入。

战斗(Combat)如何开始？
-----------------------
对于C/S结构，多个Client连接到Server，然后相继(同时)点击开始战斗，Server开始收集所有Client的输入，
并定期(如50ms)发送给所有客户端。

当多个客户端匹配好之后，选择好英雄。Server收到第一个开启战斗命令时，开始帧驱动计时，计时达到后，将收集
到的数据发送给所有客户端，客户端开始被帧驱动前进。

如何中途加入战斗？
-------------------
在Server发出第一个帧数据包后进入战斗的都是中途加入。当收到进入战斗命令后，进行一系列检查后，满足条件，
就转换为进入战斗的帧命令，加入到服务器的帧数据包中即可。

客户端收到新角色加入的帧命令即创建一个对应的英雄。

中途退出和战斗中切换英雄与加入战斗类似。需要一个特殊的帧命令来完成。

其它问题
========
*   与非帧命令的结合。输入/离开房间
*   相关命令的帧命令化。如，切换英雄，玩家中途进入、退出、掉线


参考资料
=======
